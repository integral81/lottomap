import json
import os

search_data_raw = """
1043 | 2022.11.26 | 17 | 1,468,646,956원 | 3, 5, 12, 22, 26, 31 | 19
1042 | 2022.11.19 | 17 | 1,514,561,162원 | 7, 21, 30, 34, 40, 43 | 44
1041 | 2022.11.12 | 11 | 2,492,028,853원 | 4, 18, 28, 33, 42, 45 | 11
1040 | 2022.11.05 | 10 | 2,709,036,375원 | 1, 10, 16, 28, 34, 39 | 17
1039 | 2022.10.29 | 10 | 2,646,039,788원 | 5, 13, 15, 29, 30, 32 | 3
1038 | 2022.10.22 | 14 | 1,933,830,625원 | 17, 20, 24, 25, 27, 43 | 22
1037 | 2022.10.15 | 14 | 1,827,247,581원 | 9, 21, 23, 29, 36, 38 | 1
1036 | 2022.10.08 | 10 | 2,618,343,900원 | 1, 5, 14, 26, 37, 41 | 10
1035 | 2022.10.01 | 15 | 1,770,899,225원 | 15, 20, 28, 34, 38, 44 | 42
1034 | 2022.09.24 | 12 | 2,139,370,125원 | 10, 21, 25, 36, 40, 44 | 2
1033 | 2022.09.17 | 10 | 2,624,311,988원 | 2, 7, 20, 22, 26, 28 | 43
1032 | 2022.09.10 | 11 | 2,367,237,353원 | 2, 6, 17, 24, 27, 33 | 36
1031 | 2022.09.03 | 12 | 2,137,211,438원 | 11, 13, 20, 21, 34, 43 | 3
1030 | 2022.08.27 | 10 | 2,525,483,100원 | 1, 9, 23, 24, 30, 42 | 41
1029 | 2022.08.20 | 12 | 2,109,240,688원 | 2, 10, 16, 19, 38, 44 | 40
1028 | 2022.08.13 | 13 | 1,940,361,866원 | 1, 2, 13, 18, 28, 40 | 6
1027 | 2022.08.06 | 12 | 2,042,398,375원 | 1, 4, 13, 31, 35, 41 | 37
1026 | 2022.07.30 | 13 | 1,984,768,000원 | 4, 10, 11, 15, 30, 37 | 25
1025 | 2022.07.23 | 11 | 2,374,271,796원 | 13, 14, 23, 33, 35, 44 | 16
1024 | 2022.07.16 | 13 | 2,058,954,587원 | 8, 12, 16, 21, 27, 31 | 39
1023 | 2022.07.09 | 11 | 2,423,722,864원 | 1, 10, 16, 17, 28, 40 | 15
1022 | 2022.07.02 | 11 | 2,488,438,819원 | 14, 26, 29, 30, 31, 42 | 22
1021 | 2022.06.25 | 11 | 2,357,984,273원 | 9, 13, 23, 26, 32, 44 | 1
1020 | 2022.06.18 | 13 | 2,026,386,597원 | 4, 18, 20, 26, 27, 43 | 39
1019 | 2022.06.11 | 9 | 2,990,392,667원 | 13, 18, 20, 22, 33, 44 | 16
1018 | 2022.06.04 | 11 | 2,421,411,046원 | 14, 20, 22, 27, 30, 44 | 17
1017 | 2022.05.28 | 13 | 2,075,127,116원 | 4, 10, 14, 16, 29, 39 | 1
1016 | 2022.05.21 | 14 | 1,960,378,661원 | 8, 13, 19, 27, 40, 45 | 3
1015 | 2022.05.14 | 11 | 2,425,720,523원 | 4, 5, 20, 27, 32, 39 | 17
1014 | 2022.05.07 | 10 | 2,752,382,213원 | 1, 5, 13, 26, 35, 42 | 30
1013 | 2022.04.30 | 13 | 2,139,474,866원 | 2, 10, 25, 27, 38, 43 | 9
1012 | 2022.04.23 | 8 | 3,454,082,157원 | 8, 11, 16, 19, 23, 30 | 45
1011 | 2022.04.16 | 10 | 2,683,991,475원 | 2, 11, 19, 25, 26, 36 | 32
1010 | 2022.04.09 | 13 | 2,056,587,600원 | 11, 23, 27, 36, 37, 42 | 14
1009 | 2022.04.02 | 13 | 2,058,154,674원 | 1, 11, 22, 23, 26, 31 | 37
1008 | 2022.03.26 | 13 | 2,073,617,135원 | 10, 20, 24, 30, 39, 43 | 4
1007 | 2022.03.19 | 12 | 2,242,168,063원 | 3, 10, 24, 33, 39, 41 | 18
1006 | 2022.03.12 | 12 | 2,176,966,613원 | 12, 18, 22, 23, 30, 32 | 4
1005 | 2022.03.05 | 9 | 2,933,788,625원 | 14, 18, 22, 26, 29, 44 | 43
1004 | 2022.02.26 | 11 | 2,410,480,296원 | 5, 7, 12, 16, 29, 35 | 39
1003 | 2022.02.19 | 14 | 1,849,273,447원 | 12, 13, 23, 26, 33, 44 | 1
1002 | 2022.02.12 | 12 | 2,150,757,688원 | 12, 14, 25, 29, 34, 45 | 31
1001 | 2022.02.05 | 11 | 2,367,237,353원 | 13, 14, 18, 20, 25, 41 | 37
1000 | 2022.01.29 | 19 | 1,327,707,316원 | 6, 11, 15, 26, 32, 42 | 30
"""

CACHE_FILE = "lotto_fetch_cache.json"

def update_cache():
    if os.path.exists(CACHE_FILE):
        with open(CACHE_FILE, "r", encoding="utf-8") as f:
            cache = json.load(f)
    else:
        cache = {}

    lines = search_data_raw.strip().split("\n")
    for line in lines:
        parts = [p.strip() for p in line.split("|")]
        if len(parts) < 5: continue
        
        drw_no = parts[0]
        drw_date = parts[1]
        nums = [int(n.strip()) for n in parts[4].split(",")]
        
        cache[drw_no] = {
            '회차': int(drw_no),
            '추첨일': drw_date,
            '번호1': nums[0],
            '번호2': nums[1],
            '번호3': nums[2],
            '번호4': nums[3],
            '번호5': nums[4],
            '번호6': nums[5]
        }
    
    with open(CACHE_FILE, "w", encoding="utf-8") as f:
        json.dump(cache, f, ensure_ascii=False, indent=2)
    
    print(f"Updated cache with {len(lines)} rounds. Total in cache: {len(cache)}")

if __name__ == "__main__":
    update_cache()
